MCS=mcs
DESTDIR=

all: linux

windows:
	$(CSC) /unsafe /target:library \
	/r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll \
	/r:../atk/atk-sharp.dll /r:../gdk/gdk-sharp.dll \
	/r:../gtk/gtk-sharp.dll /r:../gnome/gnome-sharp.dll \
	/out:gtkhtml-sharp.dll /recurse:*.cs

linux: gtkhtml-sharp.dll

gtkhtml-sharp.dll: generated/*.cs
	$(MCS) --unsafe -nowarn:0660,0661 --target library \
	-r ../glib/glib-sharp.dll -r ../pango/pango-sharp.dll \
	-r ../atk/atk-sharp.dll -r ../gdk/gdk-sharp.dll \
	-r ../gtk/gtk-sharp.dll -r ../gnome/gnome-sharp.dll \
	-o gtkhtml-sharp.dll --recurse '*.cs'

clean:
	rm -f *.dll
	rm -rf generated

install: all
	../mkinstalldirs $(DESTDIR)@prefix@/lib && \
	cp gtkhtml-sharp.dll $(DESTDIR)@prefix@/lib

