MCS=mcs
DESTDIR=

@ENABLE_GDA_TRUE@ all: linux
@ENABLE_GDA_FALSE@ all: 

windows:
	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /out:gda-sharp.dll /recurse:*.cs

linux: gda-sharp.dll

gda-sharp.dll: Application.cs generated/*.cs
	$(MCS) --unsafe -nowarn:0060,0061 --target library -L ../glib -r glib-sharp.dll -o gda-sharp.dll --recurse '*.cs'

clean:
	rm -f *.dll
	rm -rf generated

install: all
@ENABLE_GDA_TRUE@	../mkinstalldirs $(DESTDIR)@prefix@/lib && \
@ENABLE_GDA_TRUE@	cp gda-sharp.dll $(DESTDIR)@prefix@/lib
