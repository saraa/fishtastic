MCS=mcs
DESTDIR=

@ENABLE_GNOMEDB_TRUE@ all: linux
@ENABLE_GNOMEDB_FALSE@ all: 

windows:
	$(CSC) /unsafe /target:library /r:../glib/glib-sharp.dll /r:../pango/pango-sharp.dll /r:../atk/atk-sharp.dll /r:../art/art-sharp.dll /r:../gdk/gdk-sharp.dll /r:../gtk/gtk-sharp.dll /r:../gnome/gnome-sharp.dll /r:../gda/gda-sharp.dll /out:gnomedb-sharp.dll /recurse:*.cs

linux: gnomedb-sharp.dll

gnomedb-sharp.dll: Application.cs generated/*.cs
	$(MCS) --unsafe -nowarn:0660,0661 --target library -L ../glib -L ../pango -L ../atk -L ../art -L ../gdk -L ../gtk -L ../gnome -L ../gda -r glib-sharp.dll -r pango-sharp.dll -r atk-sharp.dll -r art-sharp.dll -r gdk-sharp.dll -r gtk-sharp.dll -r gnome-sharp.dll -r gda-sharp.dll -o gnomedb-sharp.dll --recurse '*.cs'

clean:
	rm -f *.dll
	rm -rf generated

install: all
@ENABLE_GNOMEDB_TRUE@	../mkinstalldirs $(DESTDIR)@prefix@/lib && \
@ENABLE_GNOMEDB_TRUE@	cp gnomedb-sharp.dll $(DESTDIR)@prefix@/lib
